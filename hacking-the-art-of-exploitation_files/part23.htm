<!DOCTYPE  html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en" lang="en"><head><meta http-equiv="Content-Type" content="text/html; charset=utf-8"/><title>0x242 Arithmetic Operators</title><link href="navigation.css" rel="stylesheet" type="text/css"/><link href="document.css" rel="stylesheet" type="text/css"/></head><body><p class="top_nav"><a href="part22.htm">&lt; Previous</a><span> | </span><a href="../hacking-the-art-of-exploitation.html">Contents</a><span> | </span><a href="part24.htm">Next &gt;</a></p><p class="s32" style="padding-left: 91pt;text-indent: 0pt;text-align: left;"><a name="bookmark13">0x242 Arithmetic Operators</a></p><p style="padding-top: 5pt;padding-left: 91pt;text-indent: 0pt;line-height: 108%;text-align: justify;">The statement <span class="s31">b = a + 7 </span>is an example of a very simple arithmetic operator. In C, the following symbols are used for various arithmetic operations.</p><p style="padding-left: 91pt;text-indent: 17pt;line-height: 108%;text-align: justify;">The first four operations should look familiar. Modulo reduction may seem like a new concept, but it’s really just taking the remainder after divi- sion. If <span class="s31">a </span>is 13, then 13 divided by 5 equals 2, with a remainder of 3, which means that <span class="s31">a % 5 = 3</span>. Also, since the variables <span class="s31">a </span>and <span class="s31">b </span>are integers, the</p><p style="padding-top: 3pt;padding-left: 91pt;text-indent: 0pt;line-height: 108%;text-align: justify;">statement <span class="s31">b = a / 5 </span>will result in the value of 2 being stored in <span class="s31">b</span>, since that’s the integer portion of it. Floating-point variables must be used to retain the more correct answer of 2.6.</p><p style="text-indent: 0pt;text-align: left;"><br/></p><table style="border-collapse:collapse;margin-left:91.44pt" cellspacing="0"><tr style="height:13pt"><td style="width:68pt;border-top-style:solid;border-top-width:5pt;border-bottom-style:solid;border-bottom-width:2pt"><p class="s34" style="padding-left: 2pt;text-indent: 0pt;line-height: 10pt;text-align: left;">Operation</p></td><td style="width:34pt;border-top-style:solid;border-top-width:5pt;border-bottom-style:solid;border-bottom-width:2pt"><p class="s34" style="padding-left: 4pt;text-indent: 0pt;line-height: 10pt;text-align: left;">Symbol</p></td><td style="width:49pt;border-top-style:solid;border-top-width:5pt;border-bottom-style:solid;border-bottom-width:2pt"><p class="s34" style="padding-left: 4pt;text-indent: 0pt;line-height: 10pt;text-align: left;">Example</p></td></tr><tr style="height:13pt"><td style="width:68pt;border-top-style:solid;border-top-width:2pt"><p class="s35" style="padding-left: 2pt;text-indent: 0pt;text-align: left;">Addition</p></td><td style="width:34pt;border-top-style:solid;border-top-width:2pt"><p class="s36" style="padding-left: 4pt;text-indent: 0pt;text-align: left;">+</p></td><td style="width:49pt;border-top-style:solid;border-top-width:2pt"><p class="s36" style="padding-left: 4pt;text-indent: 0pt;text-align: left;">b = a + 5</p></td></tr><tr style="height:14pt"><td style="width:68pt"><p class="s35" style="padding-top: 2pt;padding-left: 2pt;text-indent: 0pt;text-align: left;">Subtraction</p></td><td style="width:34pt"><p class="s36" style="padding-top: 2pt;padding-left: 4pt;text-indent: 0pt;text-align: left;">-</p></td><td style="width:49pt"><p class="s36" style="padding-top: 2pt;padding-left: 4pt;text-indent: 0pt;text-align: left;">b = a - 5</p></td></tr><tr style="height:14pt"><td style="width:68pt"><p class="s35" style="padding-top: 2pt;padding-left: 2pt;text-indent: 0pt;text-align: left;">Multiplication</p></td><td style="width:34pt"><p class="s36" style="padding-top: 2pt;padding-left: 4pt;text-indent: 0pt;text-align: left;">*</p></td><td style="width:49pt"><p class="s36" style="padding-top: 2pt;padding-left: 4pt;text-indent: 0pt;text-align: left;">b = a * 5</p></td></tr><tr style="height:14pt"><td style="width:68pt"><p class="s35" style="padding-top: 2pt;padding-left: 2pt;text-indent: 0pt;text-align: left;">Division</p></td><td style="width:34pt"><p class="s36" style="padding-top: 2pt;padding-left: 4pt;text-indent: 0pt;text-align: left;">/</p></td><td style="width:49pt"><p class="s36" style="padding-top: 2pt;padding-left: 4pt;text-indent: 0pt;text-align: left;">b = a / 5</p></td></tr><tr style="height:14pt"><td style="width:68pt;border-bottom-style:solid;border-bottom-width:2pt"><p class="s35" style="padding-top: 2pt;padding-left: 2pt;text-indent: 0pt;text-align: left;">Modulo reduction</p></td><td style="width:34pt;border-bottom-style:solid;border-bottom-width:2pt"><p class="s36" style="padding-top: 2pt;padding-left: 4pt;text-indent: 0pt;text-align: left;">%</p></td><td style="width:49pt;border-bottom-style:solid;border-bottom-width:2pt"><p class="s36" style="padding-top: 2pt;padding-left: 4pt;text-indent: 0pt;text-align: left;">b = a % 5</p></td></tr></table><p style="padding-top: 9pt;padding-left: 91pt;text-indent: 17pt;line-height: 108%;text-align: justify;">To get a program to use these concepts, you must speak its language. The C language also provides several forms of shorthand for these arithmetic oper- ations. One of these was mentioned earlier and is used commonly in for loops.</p><p style="text-indent: 0pt;text-align: left;"><br/></p><p style="padding-left: 91pt;text-indent: 0pt;line-height: 3pt;text-align: left;"><span><img width="281" height="4" alt="image" src="Image_034.png"/></span></p><p class="s37" style="padding-bottom: 3pt;padding-left: 93pt;text-indent: 0pt;text-align: justify;">Full Expression Shorthand  Explanation</p><p style="padding-left: 91pt;text-indent: 0pt;line-height: 2pt;text-align: left;"><span><img width="280" height="3" alt="image" src="Image_035.png"/></span></p><p class="s38" style="padding-left: 93pt;text-indent: 0pt;text-align: justify;">i = i + 1   i++ or ++i <span class="s39">Add 1 to the variable.</span></p><p class="s38" style="padding-top: 4pt;padding-bottom: 2pt;padding-left: 93pt;text-indent: 0pt;text-align: justify;">i = i - 1   i-- or --i <span class="s39">Subtract 1 from the variable.</span></p><p style="padding-left: 91pt;text-indent: 0pt;line-height: 2pt;text-align: left;"><span><img width="280" height="3" alt="image" src="Image_036.png"/></span></p><p style="text-indent: 0pt;text-align: left;"><br/></p><p style="padding-left: 91pt;text-indent: 18pt;line-height: 106%;text-align: left;">These shorthand expressions can be combined with other arithmetic operations to produce more complex expressions. This is where the differ- ence between <span class="s31">i++ </span>and <span class="s31">++i </span>becomes apparent. The first expression means <span class="s27">Increment the value of </span><span class="s33">i </span><span class="s27">by 1 </span>after <span class="s27">evaluating the arithmetic operation</span>, while the second expression means <span class="s27">Increment the value of </span><span class="s33">i </span><span class="s27">by 1 </span>before <span class="s27">evaluating the arithmetic operation</span>. The following example will help clarify.</p><p style="text-indent: 0pt;text-align: left;"><br/></p><p style="padding-left: 91pt;text-indent: 0pt;line-height: 1pt;text-align: left;"><span><img width="444" height="1" alt="image" src="Image_037.png"/></span></p><p class="s31" style="padding-left: 91pt;text-indent: 0pt;text-align: left;">int a, b;</p><p class="s31" style="padding-left: 91pt;text-indent: 0pt;text-align: left;">a = 5;</p><p class="s31" style="padding-bottom: 3pt;padding-left: 91pt;text-indent: 0pt;text-align: left;">b = a++ * 6;</p><p style="padding-left: 91pt;text-indent: 0pt;line-height: 1pt;text-align: left;"><span><img width="444" height="1" alt="image" src="Image_038.png"/></span></p><p style="padding-top: 7pt;padding-left: 91pt;text-indent: 17pt;line-height: 108%;text-align: left;">At the end of this set of instructions, <span class="s31">b </span>will contain 30 and <span class="s31">a </span>will contain 6, since the shorthand of <span class="s31">b = a++ * 6; </span>is equivalent to the following statements:</p><p style="text-indent: 0pt;text-align: left;"><br/></p><p style="padding-left: 91pt;text-indent: 0pt;line-height: 1pt;text-align: left;"><span><img width="444" height="1" alt="image" src="Image_039.png"/></span></p><p class="s31" style="padding-bottom: 3pt;padding-left: 91pt;text-indent: 0pt;text-align: left;">b = a * 6; a = a + 1;</p><p style="padding-left: 91pt;text-indent: 0pt;line-height: 1pt;text-align: left;"><span><img width="444" height="1" alt="image" src="Image_040.png"/></span></p><p style="padding-top: 8pt;padding-left: 91pt;text-indent: 18pt;line-height: 108%;text-align: left;">However, if the instruction <span class="s31">b = ++a * 6; </span>is used, the order of the addition to <span class="s31">a </span>changes, resulting in the following equivalent instructions:</p><p style="text-indent: 0pt;text-align: left;"><br/></p><p style="padding-left: 91pt;text-indent: 0pt;line-height: 1pt;text-align: left;"><span><img width="444" height="1" alt="image" src="Image_041.png"/></span></p><p class="s31" style="padding-left: 91pt;text-indent: 0pt;line-height: 10pt;text-align: left;">a = a + 1;</p><p class="s31" style="padding-bottom: 3pt;padding-left: 91pt;text-indent: 0pt;line-height: 10pt;text-align: left;">b = a * 6;</p><p style="padding-left: 91pt;text-indent: 0pt;line-height: 1pt;text-align: left;"><span><img width="444" height="1" alt="image" src="Image_042.png"/></span></p><p style="padding-top: 7pt;padding-left: 91pt;text-indent: 17pt;line-height: 108%;text-align: left;">Since the order has changed, in this case <span class="s31">b </span>will contain 36, and <span class="s31">a </span>will still contain 6.</p><p style="padding-top: 3pt;padding-left: 91pt;text-indent: 17pt;line-height: 108%;text-align: left;">Quite often in programs, variables need to be modified in place. For example, you might need to add an arbitrary value like 12 to a variable, and store the result right back in that variable (for example, <span class="s31">i = i + 12</span>). This happens commonly enough that shorthand also exists for it.</p><p style="text-indent: 0pt;text-align: left;"><br/></p><p style="padding-left: 91pt;text-indent: 0pt;line-height: 3pt;text-align: left;"><span><img width="323" height="4" alt="image" src="Image_043.png"/></span></p><p class="s37" style="padding-bottom: 2pt;padding-left: 93pt;text-indent: 0pt;text-align: left;">Full Expression Shorthand Explanation</p><p style="padding-left: 91pt;text-indent: 0pt;line-height: 2pt;text-align: left;"><span><img width="321" height="3" alt="image" src="Image_044.png"/></span></p><p class="s38" style="padding-left: 93pt;text-indent: 0pt;text-align: left;">i = i + 12   i+=12   <span class="s39">Add some value to the variable.</span></p><p style="text-indent: 0pt;text-align: left;"><span><img width="323" height="3" alt="image" src="Image_045.png"/></span></p><p class="s38" style="padding-top: 4pt;padding-left: 93pt;text-indent: 0pt;line-height: 143%;text-align: left;">i = i - 12   i-=12   <span class="s39">Subtract some value from the variable. </span>i = i * 12   i*=12   <span class="s39">Multiply some value by the variable. </span>i = i / 12   i/=12   <span class="s39">Divide some value from the variable.</span></p><p style="text-indent: 0pt;text-align: left;"><br/></p><p class="nav">&nbsp;&nbsp;</p><p class="nav">&nbsp;</p><p class="nav"><a href="part22.htm">&lt; Previous</a><span> | </span><a href="../hacking-the-art-of-exploitation.html">Contents</a><span> | </span><a href="part24.htm">Next &gt;</a></p><p class="nav">&nbsp;&nbsp;</p></body></html>
