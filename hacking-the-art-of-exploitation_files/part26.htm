<!DOCTYPE  html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en" lang="en"><head><meta http-equiv="Content-Type" content="text/html; charset=utf-8"/><title>0x250 Getting Your Hands Dirty</title><link href="navigation.css" rel="stylesheet" type="text/css"/><link href="document.css" rel="stylesheet" type="text/css"/></head><body><p class="top_nav"><a href="part25.htm">&lt; Previous</a><span> | </span><a href="../hacking-the-art-of-exploitation.html">Contents</a><span> | </span><a href="part27.htm">Next &gt;</a></p><p class="s30" style="padding-left: 37pt;text-indent: 0pt;text-align: left;"><a name="bookmark16">0x250 Getting Your Hands Dirty</a></p><p style="padding-top: 7pt;padding-left: 91pt;text-indent: 0pt;line-height: 106%;text-align: left;">Now that the syntax of C feels more familiar and some fundamental program- ming concepts have been explained, actually programming in C isn’t that big of a step. C compilers exist for just about every operating system and processor architecture out there, but for this book, Linux and an <span class="s27">x </span>86-based processor will be used exclusively. Linux is a free operating system that everyone has access to, and <span class="s27">x </span>86 -based processors are the most popular consumer-grade processor on the planet. Since hacking is really about experimenting, it’s probably best if you have a C compiler to follow along with.</p><p style="padding-left: 91pt;text-indent: 17pt;line-height: 106%;text-align: left;">Included with this book is a LiveCD you can use to follow along if your computer has an <span class="s27">x</span>86 processor. Just put the CD in the drive and reboot your computer. It will boot into a Linux environment without modifying your existing operating system. From this Linux environment you can follow along with the book and experiment on your own.</p><p style="padding-left: 91pt;text-indent: 17pt;line-height: 108%;text-align: left;">Let’s get right to it. The firstprog.c program is a simple piece of C code that will print “Hello, world!” 10 times.</p><p style="text-indent: 0pt;text-align: left;"><br/></p><p class="s40" style="padding-left: 91pt;text-indent: 0pt;text-align: left;">firstprog.c</p><p style="text-indent: 0pt;text-align: left;"><span><img width="444" height="1" alt="image" src="Image_066.png"/></span></p><p class="s31" style="padding-left: 91pt;text-indent: 0pt;line-height: 21pt;text-align: left;">#include &lt;stdio.h&gt; int main()</p><p class="s31" style="padding-left: 91pt;text-indent: 0pt;line-height: 8pt;text-align: left;">{</p><p class="s31" style="padding-left: 99pt;text-indent: 0pt;text-align: left;">int i;</p><p class="s31" style="padding-left: 99pt;text-indent: 0pt;text-align: left;">for(i=0; i &lt; 10; i++)   // Loop 10 times.</p><p class="s31" style="padding-left: 99pt;text-indent: 0pt;text-align: left;">{</p><p class="s31" style="padding-left: 108pt;text-indent: 0pt;text-align: left;">puts(&quot;Hello, world!\n&quot;);  // put the string to the output.</p><p class="s31" style="padding-left: 99pt;text-indent: 0pt;text-align: left;">}</p><p class="s31" style="padding-left: 99pt;text-indent: 0pt;text-align: left;">return 0;          // Tell OS the program exited without errors.</p><p class="s31" style="padding-bottom: 3pt;padding-left: 91pt;text-indent: 0pt;text-align: left;">}</p><p style="padding-left: 91pt;text-indent: 0pt;line-height: 1pt;text-align: left;"><span><img width="444" height="1" alt="image" src="Image_067.png"/></span></p><p style="text-indent: 0pt;text-align: left;"><br/></p><p style="padding-top: 4pt;padding-left: 91pt;text-indent: 20pt;line-height: 108%;text-align: left;">The main execution of a C program begins in the aptly named <span class="s31">main() </span>function. Any text following two forward slashes (<span class="s31">//</span>) is a comment, which is ignored by the compiler.</p><p style="padding-left: 91pt;text-indent: 18pt;line-height: 108%;text-align: left;">The first line may be confusing, but it’s just C syntax that tells the com- piler to include headers for a standard input/output (I/O) library named <span class="s31">stdio</span>. This header file is added to the program when it is compiled. It is located at /usr/include/stdio.h, and it defines several constants and func- tion prototypes for corresponding functions in the standard I/O library. Since the <span class="s31">main() </span>function uses the <span class="s31">printf() </span>function from the standard I/O</p><p style="padding-top: 3pt;padding-left: 91pt;text-indent: 0pt;line-height: 108%;text-align: left;">library, a function prototype is needed for <span class="s31">printf() </span>before it can be used. This function prototype (along with many others) is included in the stdio.h header file. A lot of the power of C comes from its extensibility and libraries. The rest of the code should make sense and look a lot like the pseudo-code from before. You may have even noticed that there’s a set of curly braces that can be eliminated. It should be fairly obvious what this program will do, but let’s compile it using GCC and run it just to make sure.</p><p style="padding-left: 91pt;text-indent: 17pt;line-height: 106%;text-align: left;">The <span class="s27">GNU Compiler Collection (GCC) </span>is a free C compiler that translates C into machine language that a processor can understand. The outputted trans- lation is an executable binary file, which is called <span class="s31">a.out </span>by default. Does the compiled program do what you thought it would?</p><p style="text-indent: 0pt;text-align: left;"><br/></p><p style="padding-left: 91pt;text-indent: 0pt;line-height: 1pt;text-align: left;"><span><img width="444" height="1" alt="image" src="Image_068.png"/></span></p><p class="s31" style="padding-left: 91pt;text-indent: 0pt;line-height: 107%;text-align: left;">reader@hacking:~/booksrc $ gcc firstprog.c reader@hacking:~/booksrc $ ls -l a.out</p><p class="s31" style="padding-left: 91pt;text-indent: 0pt;line-height: 107%;text-align: left;">-rwxr-xr-x 1 reader reader 6621 2007-09-06 22:16 a.out reader@hacking:~/booksrc $ ./a.out</p><p class="s31" style="padding-left: 91pt;text-indent: 0pt;line-height: 106%;text-align: justify;">Hello, world! Hello, world! Hello, world! Hello, world! Hello, world! Hello, world! Hello, world! Hello, world! Hello, world! Hello, world!</p><p class="s31" style="padding-bottom: 3pt;padding-left: 91pt;text-indent: 0pt;text-align: justify;">reader@hacking:~/booksrc $</p><p style="padding-left: 91pt;text-indent: 0pt;line-height: 1pt;text-align: left;"><span><img width="444" height="1" alt="image" src="Image_069.png"/></span></p><p style="text-indent: 0pt;text-align: left;"><br/></p><p class="nav">&nbsp;&nbsp;</p><p class="nav">&nbsp;</p><p class="nav"><a href="part25.htm">&lt; Previous</a><span> | </span><a href="../hacking-the-art-of-exploitation.html">Contents</a><span> | </span><a href="part27.htm">Next &gt;</a></p><p class="nav">&nbsp;&nbsp;</p></body></html>
